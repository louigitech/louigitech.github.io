<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="dark"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge &middot; louigi.tech</title>
  <meta name="title" content="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge &middot; louigi.tech" />
  
  <meta name="description" content="Proxmox let&#39;s encrypt certificate with DNS challenge Infomaniak" />
  <meta name="keywords" content="System, " />
  
  
  <link rel="canonical" href="http://localhost:1313/posts/proxmox-dns-challenge/" />
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.e20c59ba3b5a9d9f152067043fa04c4e1388cd24a09f085fe201e1b7ea461e1c16dd6a90f365eb44fdfdabb424e381efd8ff1f2f40a8c02151087cc43ec2a1df.css"
    integrity="sha512-4gxZujtanZ8VIGcEP6BMThOIzSSgnwhf4gHht&#43;pGHhwW3WqQ82XrRP39q7Qk44Hv2P8fL0CowCFRCHzEPsKh3w==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.b6ae281850c9dcef0589978f2efce778acefe462b65aad3ea3d1af2ba87601b52821a574767a5c0f5e5c48459e8842f5d9c1f4acb9e34fa310887cd0094e137a.js"
    integrity="sha512-tq4oGFDJ3O8FiZePLvzneKzv5GK2Wq0&#43;o9GvK6h2AbUoIaV0dnpcD15cSEWeiEL12cH0rLnjT6MQiHzQCU4Teg==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.fcbc7f7b3dcea96e3b5570cd322c5d7a12d5351c87f9889b1c31745a2cc711df58f6b70795a86d50e63813b236ade916668332c10a70a4ce26f7c0878f525fce.js" integrity="sha512-/Lx/ez3OqW47VXDNMixdehLVNRyH&#43;YibHDF0WizHEd9Y9rcHlahtUOY4E7I2rekWZoMywQpwpM4m98CHj1Jfzg=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge" />
<meta property="og:description" content="Proxmox let&#39;s encrypt certificate with DNS challenge Infomaniak" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/proxmox-dns-challenge/" /><meta property="og:image" content="http://localhost:1313/fr/posts/proxmox-dns-challenge/featured.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-10-30T15:00:00+02:00" />
<meta property="article:modified_time" content="2024-10-30T15:00:00+02:00" />

  <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/fr/posts/proxmox-dns-challenge/featured.jpg" /><meta name="twitter:title" content="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge"/>
<meta name="twitter:description" content="Proxmox let&#39;s encrypt certificate with DNS challenge Infomaniak"/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Proxmox: Let\u0027s Encrypt Certificate with DNS Challenge",
    "headline": "Proxmox: Let\u0027s Encrypt Certificate with DNS Challenge",
    "description": "Proxmox let\u0027s encrypt certificate with DNS challenge Infomaniak",
    "abstract": "üì¢ Introduction #\rWhether in your homelab or in a production environment, you\u0026rsquo;ve likely encountered this message on your first connection to your Proxmox host:",
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/posts\/proxmox-dns-challenge\/",
    "author" : {
      "@type": "Person",
      "name": "Louis GATTABRUSI"
    },
    "copyrightYear": "2024",
    "dateCreated": "2024-10-30T15:00:00\u002b02:00",
    "datePublished": "2024-10-30T15:00:00\u002b02:00",
    
    "dateModified": "2024-10-30T15:00:00\u002b02:00",
    
    "keywords": ["System"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1505"
  }]
  </script>


  
  
  <meta name="author" content="Louis GATTABRUSI" />
  
  
  
  <link href="https://github.com/louigitech" rel="me" />
  
  
  <link href="https://www.linkedin.com/in/lgattabrusi/" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.03cb160e3cfdb2667a2e2c80d283bebcf63ff8bbc4b629c9ab2babf6fae1d0c07ad470edae783efa4fabda2ac01c58d60e63b98b3c336be8208460f08f4354f5.js" integrity="sha512-A8sWDjz9smZ6LiyA0oO&#43;vPY/&#43;LvEtinJqyur9vrh0MB61HDtrng&#43;&#43;k&#43;r2irAHFjWDmO5izwza&#43;gghGDwj0NU9Q=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px] bg-neutral dark:bg-neutral-800" style="z-index:100">
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    
    
    <div>
        <a href="/" class="flex">
            <span class="sr-only">louigi.tech</span>

            
            <img src="/img/logo.png" width="1920" height="1080"
                class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="louigi.tech" />
            

        </a>
    </div>
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        Home
    </p>
</a>



            
            
  <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        Blog
    </p>
</a>



            
            

            
<div>
  <div class="cursor-pointer flex items-center nested-menu">
    <span class="mr-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
    <path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3 0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg>
  </span>


    </span>
    <div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge">EN</div>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/posts/proxmox-dns-challenge/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge">
            English
          </p>
        </a>
        
        <a href="/fr/posts/proxmox-dns-challenge/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox : Certificat Let&#39;s Encrypt avec challenge DNS">
            Fran√ßais
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            
<div>
  <div class="cursor-pointer flex items-center nested-menu">
    <span class="mr-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
    <path fill="currentColor" d="M0 128C0 92.7 28.7 64 64 64H256h48 16H576c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H320 304 256 64c-35.3 0-64-28.7-64-64V128zm320 0V384H576V128H320zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276H141l19-42.8zM448 164c11 0 20 9 20 20v4h44 16c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45H448 376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z"/></svg>
  </span>


    </span>
    <div class="text-sm font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge">EN</div>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/posts/proxmox-dns-challenge/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge">
            English
          </p>
        </a>
        
        <a href="/fr/posts/proxmox-dns-challenge/" class="flex items-center">
          <p class="text-sm font-sm text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="Proxmox : Certificat Let&#39;s Encrypt avec challenge DNS">
            Fran√ßais
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" class="block">
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li id="menu-close-button">
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Home
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/posts/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Blog
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
    })();
</script>


  </div>
</div>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  


<div class="w-full rounded-md h-36 md:h-56 lg:h-72 single_hero_basic nozoom" style="background-image:url(/fr/posts/proxmox-dns-challenge/featured.jpg);"></div>



<div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/img/louigi_topographic_bg.svg);">
    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-30 dark:opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>



  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >louigi.tech</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/posts/proxmox-dns-challenge/"
      >Proxmox: Let&#39;s Encrypt Certificate with DNS Challenge</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Proxmox: Let's Encrypt Certificate with DNS Challenge
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  







  











  



<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2024-10-30T15:00:00&#43;02:00">30 October 2024</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">8 mins</span><span class="px-2 text-primary-500">&middot;</span>


<script type="text/javascript" src="/js/zen-mode.min.63c8a202661f4a2063fdc2706685d668e8ea3da613da2224e9da527e5876e4f53dcac39ab60732626fb4151feae5d430d0cf44731e5d3c726522fcc1519c1547.js" integrity="sha512-Y8iiAmYfSiBj/cJwZoXWaOjqPaYT2iIk6dpSflh25PU9ysOatgcyYm&#43;0FR/q5dQw0M9Ecx5dPHJlIvzBUZwVRw=="></script>

<span class="mb-[2px]">
    <span id="zen-mode-button"
          class="text-lg hover:text-primary-500"
          title="Enable zen mode"
          data-title-i18n-disable="Enable zen mode"
          data-title-i18n-enable="Disable zen mode">
        <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
    </span>
</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/system/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    System
  </span>
</span>
  </span>
  
  
  
  
</div>




    </div>

    
    
    
    
    

    

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open id="TOCView"
  class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#-introduction">üì¢ Introduction</a>
      <ul>
        <li><a href="#-prerequisites">üîç Prerequisites</a></li>
        <li><a href="#-pros">‚ûï Pros</a></li>
        <li><a href="#-cons">‚ûñ Cons</a></li>
      </ul>
    </li>
    <li><a href="#-setup">‚öôÔ∏è Setup</a>
      <ul>
        <li><a href="#-acme-accounts">üõ†Ô∏è ACME Accounts</a></li>
        <li><a href="#-api-token-infomaniak">ü™ô API Token (Infomaniak)</a></li>
        <li><a href="#-challenge-plugin">üîß Challenge plugin</a></li>
        <li><a href="#-certificates-creation">üìú Certificates creation</a>
          <ul>
            <li><a href="#-staging-certificate">üß™ Staging certificate</a></li>
            <li><a href="#-production-certificate">üè≠ Production certificate</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#-conclusion">üé¨ Conclusion</a></li>
    <li><a href="#-troubleshooting">‚ùå Troubleshooting</a>
      <ul>
        <li><a href="#-infomaniak-api-token">üí° Infomaniak API Token</a></li>
        <li><a href="#-incorrect-certificate">üí° Incorrect Certificate</a></li>
        <li><a href="#-acme-validation">üí° ACME Validation</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#-introduction">üì¢ Introduction</a>
      <ul>
        <li><a href="#-prerequisites">üîç Prerequisites</a></li>
        <li><a href="#-pros">‚ûï Pros</a></li>
        <li><a href="#-cons">‚ûñ Cons</a></li>
      </ul>
    </li>
    <li><a href="#-setup">‚öôÔ∏è Setup</a>
      <ul>
        <li><a href="#-acme-accounts">üõ†Ô∏è ACME Accounts</a></li>
        <li><a href="#-api-token-infomaniak">ü™ô API Token (Infomaniak)</a></li>
        <li><a href="#-challenge-plugin">üîß Challenge plugin</a></li>
        <li><a href="#-certificates-creation">üìú Certificates creation</a>
          <ul>
            <li><a href="#-staging-certificate">üß™ Staging certificate</a></li>
            <li><a href="#-production-certificate">üè≠ Production certificate</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#-conclusion">üé¨ Conclusion</a></li>
    <li><a href="#-troubleshooting">‚ùå Troubleshooting</a>
      <ul>
        <li><a href="#-infomaniak-api-token">üí° Infomaniak API Token</a></li>
        <li><a href="#-incorrect-certificate">üí° Incorrect Certificate</a></li>
        <li><a href="#-acme-validation">üí° ACME Validation</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

<script>

  var margin = 200;
  var marginError = 50;

  (function () {
    var $window = $(window);
    var $toc = $('#TOCView');
    var tocHeight = $toc.height();

    function onResize() {
      var windowAndMarginHeight = $window.height() - margin;
      if(tocHeight >= windowAndMarginHeight) {
        $toc.css("overflow-y", "scroll")
        $toc.css("max-height", (windowAndMarginHeight + marginError) + "px")
      } else {
        $toc.css("overflow-y", "hidden")
        $toc.css("max-height", "9999999px")
      }
    }

    $window.on('resize', onResize);
    $(document).ready(onResize);
  })();



  (function () {
    var $toc = $('#TableOfContents');
    if ($toc.length > 0) {
      var $window = $(window);

      function onScroll() {
        var currentScroll = $window.scrollTop();
        var h = $('.anchor');
        var id = "";
        h.each(function (i, e) {
          e = $(e);
          if (e.offset().top - $(window).height()/3 <= currentScroll) {
            id = decodeURIComponent(e.attr('id'));
          }
        });
        var active = $toc.find('a.active');      
        if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

        active.each(function (i, e) {
           
            $(e).removeClass('active').siblings('ul').hide();
          
        });
        $toc.find('a[href="#' + id + '"]').addClass('active')
        $toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
          $(e).children('a').parents('ul').show();          
        });
      }

      $window.on('scroll', onScroll);
      $(document).ready(function () {
         
          $toc.find('a').parent('li').find('ul').hide();
        
        onScroll();
      });
    }
  })();


</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          

<h2 class="relative group">üì¢ Introduction 
    <div id="-introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-introduction" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Whether in your homelab or in a production environment, you&rsquo;ve likely encountered this message on your first connection to your Proxmox host:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/self_signed_alert.jpg" alt="Self signed alert" />
      
    </figure>
</p>
<p>By default, the Proxmox web interface comes with a self-signed certificate. Fortunately for us, the latest versions of Proxmox natively support ACME DNS challenges!</p>
<p>In this article, I will explain in detail all the steps necessary to set up a Let&rsquo;s Encrypt certificate using a DNS challenge.</p>
<p>Note that this procedure was carried out using an Infomaniak API token, as my domain is hosted with them. However, the procedure should work for other providers as well; you‚Äôll just need to adapt the settings accordingly.</p>


<h3 class="relative group">üîç Prerequisites 
    <div id="-prerequisites" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-prerequisites" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>3 things to check:</p>
<p>‚úÖ An A record on your local DNS server(s) ‚Üí Mine points to minastirith.gattabru.si<br>
‚úÖ Public domain name ‚Üí In my case, <code>gattabru.si</code><br>
‚úÖ Compatible registrar ‚Üí Domain hosted with Infomaniak</p>


<h3 class="relative group">‚ûï Pros 
    <div id="-pros" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-pros" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<ul>
<li>No need to expose ports 80 and 443 to the Internet</li>
<li>No need for A or CNAME records pointing to your public IP address</li>
<li>Therefore, enhanced security</li>
</ul>


<h3 class="relative group">‚ûñ Cons 
    <div id="-cons" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-cons" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<ul>
<li>A public domain name is <strong>required</strong></li>
<li>Your registrar must support the DNS challenge (<a href="https://go-acme.github.io/lego/dns/" target="_blank">list here</a>)</li>
<li>Complexity of setup (although, once you understand it, it&rsquo;s fairly straightforward)</li>
</ul>


<h2 class="relative group">‚öôÔ∏è Setup 
    <div id="-setup" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-setup" aria-label="Anchor">#</a>
    </span>        
    
</h2>


<h3 class="relative group">üõ†Ô∏è ACME Accounts 
    <div id="-acme-accounts" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-acme-accounts" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>We&rsquo;ll start by setting up not one but two ACME accounts on our host, here‚Äôs why:</p>
<ul>
<li>
<p>A <code>staging</code> account in the <code>Let's Encrypt V2 Staging</code> directory, which will be used to validate that our ACME configuration is correct. This allows for debugging and error correction without hitting the rate limit described below, which could otherwise result in account blocking.</p>
</li>
<li>
<p>The other is a <code>produduction</code> account in the <code>Let's Encrypt V2</code> directory. Once configuration is validated, we‚Äôll switch to this account to obtain our final certificate.</p>
</li>
</ul>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >The limit is 5 failures per account, per hostname, per hour in the <code>Let's Encrypt V2</code> directory.</span>
</div>

<p>To create the first account in the <code>Let's Encrypt V2 Staging</code> directory, go through the following menus:</p>
<ol>
<li>Datacenter</li>
<li>ACME</li>
<li>Click <code>Add</code> to add a new account</li>
<li>Fill in the information and be sure to choose the <code>Let's Encrypt V2 Staging</code> directory. Don‚Äôt forget to accept the Terms of Service (TOS).</li>
</ol>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/add_acme_account_stag.jpg" alt="Adding ACME stag. account" />
      
    </figure>
</p>
<p>Repeat steps 3 and 4 for the <code>Let's Encrypt V2</code> directory:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/add_acme_account_prod.jpg" alt="Adding ACME prod. account" />
      
    </figure>
</p>
<p>With both accounts created, we‚Äôll now create an API token from our registrar to enable the DNS challenge.</p>


<h3 class="relative group">ü™ô API Token (Infomaniak) 
    <div id="-api-token-infomaniak" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-api-token-infomaniak" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>This step will vary depending on your domain provider. Since my domain is with Infomaniak, I‚Äôll show you how it‚Äôs done on their platform. Generally, a quick Google search will provide guidance:</p>
<ul>
<li><a href="https://api.gandi.net/docs/authentication/" target="_blank">Gandi</a></li>
<li><a href="https://help.ovhcloud.com/csm/en-api-getting-started-ovhcloud-api?id=kb_article_view&amp;sysparm_article=KB0042777" target="_blank">OVH</a></li>
</ul>
<p>If your domain is with Infomaniak like mine, log into your manager and create a new token. Go to the top left in the <code>Users and Profile</code> section:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/infomaniak_api_token1.jpg" alt="Infomaniak API token" />
      
    </figure>
</p>
<p>Next, select <code>My profile</code> &gt; <code>Developer</code> &gt; puis finalement <code>API Tokens</code> to access your token management console. In this console, we‚Äôll create a new token:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/infomaniak_api_token2.jpg" alt="Infomaniak API token" />
      
    </figure>
</p>
<p>Fill in the required information, then create your token. Be sure to limit the token scope to <code>domain - Produits Noms de domaine</code>. It‚Äôs strongly recommended not to set the scope to &ldquo;All&rdquo; for obvious security reasons. Think of the consequences if your token were to be compromised.</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/infomaniak_api_token3.jpg" alt="Infomaniak API token" />
      
    </figure>
</p>
<p>Your token is now created:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/infomaniak_api_token4.jpg" alt="Infomaniak API token" />
      
    </figure>
</p>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >Once created, copy your token and store it securely, such as in a password manager.</span>
</div>

<p>As noted, you won‚Äôt be able to view the token again once you close this page. If you forget to copy it, you can always delete it and generate a new one.</p>
<p>Now that we have our token, limited to the required scope, we can return to our Proxmox host to continue configuration.</p>


<h3 class="relative group">üîß Challenge plugin 
    <div id="-challenge-plugin" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-challenge-plugin" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>In the same <code>ACME</code> menu, go to the <code>Challenge Plugin</code> section and click <code>Add</code> to add a new plugin:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/add_acme_dns_plugin.jpg" alt="Adding ACME dns plugin" />
      
    </figure>
</p>
<p>Some explanations:</p>
<ul>
<li>
<p><code>Plugin ID</code> is the name you‚Äôd like to give to your plugin. I recommend keeping it consistent, without spaces.</p>
</li>
<li>
<p><code>Validation Delay</code> is the time in seconds between creating your DNS record via the API and when the ACME provider is asked to validate it. I recommend keeping this parameter default, adjusting it later if the validation period is too short.</p>
</li>
<li>
<p><code>DNS API</code> : Who your registrar is. Depending on your selection, the section below will request different information. <em>Example with Cloudflare:</em>

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_dns_cloudflare.jpg" alt="ACME dns Cloudflare" />
      <figcaption>We can clearly see that we don&rsquo;t have the same parameters as Infomaniak</figcaption>
    </figure>
</p>
</li>
<li>
<p><code>API DATA</code> : Your API parameters, such as your token, TTL, etc.</p>
</li>
</ul>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >The <code>API DATA</code> parameters depend on your registrar and vary between providers.</span>
</div>

<p>Since my registrar is Infomaniak, I‚Äôll consult the documentation directly on the <a href="https://go-acme.github.io/lego/dns/infomaniak/index.html" target="_blank">go-acme.github.io website</a>:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_infomaniak_config.jpg" alt="ACME Infomaniak config" />
      
    </figure>
</p>
<p>The parameters listed under <code>Credentials</code> are mandatory. The others under <code>Additional Configuration</code> are optional but very helpful for validation (we‚Äôll cover this below).</p>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    ><p><strong>CAUTION:</strong> If your domain is with Infomaniak, the <code>INFOMANIAK_ACCESS_TOKEN</code> parameter won‚Äôt work with Proxmox.</p>
<p>Replace it with <code>INFOMANIAK_API_TOKEN</code> (as shown below); otherwise, you‚Äôll encounter <a href="#-infomaniak-api-token">the error described later in this article</a>.</p>
</span>
</div>

<p>Now that we know all our parameters, we can enter them in the <code>API DATA</code> field on our Proxmox host:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_dns_plugin_good_config.jpg" alt="ACME Infomaniak good config" />
      
    </figure>
</p>
<p>As shown, I‚Äôve replaced <code>INFOMANIAK_ACCESS_TOKEN</code> with <code>INFOMANIAK_API_TOKEN</code>. There‚Äôs no need to enclose your token in quotes.</p>
<p>I&rsquo;ve also added <code>INFOMANIAK_PROPAGATION_TIMEOUT</code> and <code>INFOMANIAK_TTL</code>. both set to 300 seconds. This means validation will timeout after 5 minutes if it fails, and the TTL for our record will also be 5 minutes.</p>
<p>The DNS challenge configuration is complete, and we can now generate our certificates!</p>


<h3 class="relative group">üìú Certificates creation 
    <div id="-certificates-creation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-certificates-creation" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>If you‚Äôre familiar with the DNS challenge, you can skip to the <a href="#-production-certificate">production certificate generation</a>.</p>
<p>Otherwise, I suggest testing with the <strong>staging</strong> account to avoid hitting the <a href="#-acme-accounts">the rate limits mentioned above</a>.<br>
Once the staging configuration is validated, we‚Äôll switch to the <strong>production</strong> account.</p>


<h4 class="relative group">üß™ Staging certificate 
    <div id="-staging-certificate" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-staging-certificate" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>For this, go to the <code>Certificates</code> tab of your host (<code>Hostname</code> &gt; <code>System</code> &gt; <code>Certificates</code>).<br>
Then switch the ACME account to Staging:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_acme_account.jpg" alt="Proxmox Certificates ACME account" />
      
    </figure>
</p>
<p>We can now create a new certificate via the <code>Add</code> button on this page:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_acme_staging.jpg" alt="Proxmox Certificates ACME Staging" />
      
    </figure>
</p>
<ol>
<li>
<p>Specify a <code>Challenge Type</code> of DNS, select our previously created plugin, and enter the name of our DNS record.</p>
</li>
<li>
<p>Once the fields are filled out, finalize the certificate creation with the <code>Create</code> button, then order it with <code>Order Certificates Now</code>.</p>
</li>
</ol>
<p>If everything goes well, you should see the following result:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_staging_success.jpg" alt="Proxmox ACME Staging Success" />
      
    </figure>
</p>
<p>The Proxmox web interface will then reload with the new certificate you generated:</p>

  



<div
  
    class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"
  >

  <span
    
      class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"
    >

    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>

  </span>


  </span>

  <span
    
      class="dark:text-neutral-300"
    >At this stage, it‚Äôs still normal to see a warning message. The <code>Let's Encrypt V2 Staging</code> directory does not issue certificates from a trusted authority recognized by your browser.</span>
</div>

<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_staging_check_certificate.jpg" alt="Proxmox ACME Staging Certificate" />
      
    </figure>
</p>


<h4 class="relative group">üè≠ Production certificate 
    <div id="-production-certificate" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-production-certificate" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>With our configuration validated, we can generate our final certificate. Switch to your <code>ACME_PROD</code>account to use the <code>Let's Encrypt V2</code> directory, then order your certificate via the <code>Order Certificates Now</code> button:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_acme_prod.jpg" alt="Proxmox ACME Prod" />
      
    </figure>
</p>
<p>Again, if everything proceeds smoothly, a temporary <code>_acme-challenge</code> TXT record should appear in your DNS zone, with a TTL of 5 minutes as specified in the <code>INFOMANIAK_TTL</code> parameter of our <code>ACME DNS Plugin</code> :</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/infomaniak_acme_dns_record.jpg" alt="Proxmox ACME Prod" />
      
    </figure>
</p>
<p>The result of your request should be similar to that in the <code>Let's Encrypt V2 Staging</code> directory:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_prod_success.jpg" alt="Proxmox ACME Staging Success" />
      
    </figure>
</p>
<p>Finally, the Proxmox web interface should reload with your new Let&rsquo;s Encrypt certificate in place:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_r3_certificate.jpg" alt="Proxmox ACME Prod Certificate" />
      
    </figure>
</p>


<h2 class="relative group">üé¨ Conclusion 
    <div id="-conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-conclusion" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>We‚Äôve covered the steps to secure the Proxmox web interface with a signed certificate.</p>
<p>Certificate renewal will occur automatically by default, 30 days before expiration. In case of renewal issues, Let‚Äôs Encrypt will email you at the addresses you provided in your ACME accounts.</p>
<p>If you encounter any issues, feel free to check the <a href="#probl%c3%a8mes-et-r%c3%a9solutions">Troubleshooting</a> section. Otherwise, there&rsquo;s only one thing left to do&hellip; Party tiiiime!!</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="/img/posts/proxmox-dns-challenge/celebrate.webp" alt="Celebrate" />
      
    </figure>
</p>


<h2 class="relative group">‚ùå Troubleshooting 
    <div id="-troubleshooting" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-troubleshooting" aria-label="Anchor">#</a>
    </span>        
    
</h2>


<h3 class="relative group">üí° Infomaniak API Token 
    <div id="-infomaniak-api-token" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-infomaniak-api-token" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>You followed the documentation on the <a href="https://go-acme.github.io/lego/dns/infomaniak/index.html" target="_blank">go-acme.github.io website</a> for your domain at Infomaniak but received the following error message:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Please provide a valid Infomaniak API token in variable INFOMANIAK_API_TOKEN
</span></span></code></pre></div><p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_certificates_staging_failed.jpg" alt="Proxmox Certificate Staging Failed" />
      
    </figure>
</p>
<p>And the configuration of your <code>ACME DNS Plugin</code> looks like this:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_dns_plugin_wrong_config.jpg" alt="ACME Infomaniak wrong config" />
      
    </figure>
</p>
<p>The answer is in the error message. It indicates that it expects a variable with the value <code>INFOMANIAK_API_TOKEN</code>. For some reason, on Proxmox, this parameter needs to be named <code>INFOMANIAK_API_TOKEN</code> instead of <code>INFOMANIAK_ACCESS_TOKEN</code>.</p>
<p>In the end, it‚Äôs a simple fix. Go back to your <code>ACME DNS Plugin</code> configuration and change the parameter name from <code>INFOMANIAK_ACCESS_TOKEN</code> to <code>INFOMANIAK_API_TOKEN</code>:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_dns_plugin_good_config.jpg" alt="ACME Infomaniak correct config" />
      
    </figure>
</p>


<h3 class="relative group">üí° Incorrect Certificate 
    <div id="-incorrect-certificate" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-incorrect-certificate" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>It may happen that during the <a href="#-production-certificate">production certificate generation</a>, your browser continues to display a warning regarding your certificate, even though it is indeed the Let&rsquo;s Encrypt certificate from the <code>Let's Encrypt V2</code> directory:</p>
<p>
    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/alert_good_certificate.jpg" alt="Proxmox alert good certificate" />
      
    </figure>
</p>
<p>First, check that your production certificate has indeed been applied.</p>
<p>If it has, there‚Äôs a high chance that your browser‚Äôs cache is causing the issue. Try restarting your browser, and if that doesn‚Äôt work, clear its cache and restart it again.</p>
<p>This should resolve the issue üòâ!</p>


<h3 class="relative group">üí° ACME Validation 
    <div id="-acme-validation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#-acme-validation" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>I haven&rsquo;t encountered this with Proxmox yet, but it can happen.</p>
<p>Your <code>ACME DNS Plugin</code> configuration is correct since there are no specific errors during the certificate request, yet the ACME validation fails due to a timeout.</p>
<p>Here are a few troubleshooting tips:</p>
<ul>
<li>Adjust the <code>Validation Delay</code> and/or <code>INFOMANIAK_PROPAGATION_TIMEOUT</code> parameters in your <code>ACME DNS Plugin</code>:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/acme_dns_plugin_60.jpg" alt="ACME DNS Plugin 60" />
      
    </figure>
</li>
<li>Temporarily change your host‚Äôs DNS settings:

    <figure>
      <img class="my-0 rounded-md" loading="lazy" src="img/proxmox_dns_config.jpg" alt="Proxmox temp. DNS config." />
      
    </figure>
</li>
</ul>

          
          
          
        </div>
        
        

          
            
            
<div class="flex author">
  
    
    
      
    
    
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="Louis GATTABRUSI" src="/img/avatar.jpg" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Louis GATTABRUSI
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">&hellip;</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/louigitech"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.linkedin.com/in/lgattabrusi/"
          target="_blank"
          aria-label="Linkedin"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

          

          

          
          <div class="mb-10"></div>
          

        

        
        

          
      </div>
     
      
      
        
        
          
          
        
          
          
        
      <script>
        var oid = "views_posts\\proxmox-dns-challenge\\index.md"
        var oid_likes = "likes_posts\\proxmox-dns-challenge\\index.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.b06a29d42a4ed16787978e2eee1e8c797b7698db2bc14ccee78f5c80ac566fc996190a73ad80a5e987558474b20b96fa38f7d85b405f165ff72b7b163c5ad11b.js" integrity="sha512-sGop1CpO0WeHl44u7h6MeXt2mNsrwUzO549cgKxWb8mWGQpzrYCl6YdVhHSyC5b6OPfYW0BfFl/3K3sWPFrRGw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      ¬© Copyright - Louis GATTABRUSI
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js" integrity="sha512-YgYLskf03itt3kWQNmj&#43;&#43;2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
